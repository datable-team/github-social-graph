var O=Object.defineProperty;var R=(t,e,s)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var g=(t,e,s)=>(R(t,typeof e!="symbol"?e+"":e,s),s);import{E as z,f as X,a as W,b as U,c as j,s as G,z as Y,i as S,d as N,r as w,w as q,o as H,e as V,g as k,h as T,j as p,k as D,l as Z,v as K,m as P,t as M,n as J,p as Q}from"./vendor.2bcf3ede.js";const x=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}};x();const h=5,$=5**2,b="#3d62c4",E=.125,d=2,m=.75,y="#CCCCCC",ee="#35425F",te="#623CEA",A=Math.PI*2,se=t=>t;function B(t){const e=Math.max(...t);return e===-1/0?0:e}function F(t){const e=Math.min(...t);return e===1/0?0:e}function C(t,e,s,i,o){t.beginPath(),t.arc(e,s,i,0,A,!0),t.fillStyle=o,t.fill()}function ie(t,e,s,i,o){t.save(),t.beginPath(),t.arc(e,s,i,0,A,!0);const n=Math.min(o.width,o.height);t.clip(),t.drawImage(o,(o.width-n)/2,(o.height-n)/2,n,n,e-i,s-i,i*2,i*2),t.restore()}function I(t,e,s,i,o){t.beginPath(),t.rect(e-i,s-i,2*i,2*i),t.fillStyle=o,t.fill()}function oe(t,e){const s=e.source.x,i=e.source.y,o=e.target.x,n=e.target.y;if(!(!s||!i||!o||!n))switch(e.direction){case _.NONE:{t.beginPath(),t.moveTo(s,i),t.lineTo(o,n),t.lineWidth=E,t.strokeStyle=b,t.stroke();break}case _.DUPLEX:{const l=Math.sqrt((o-s)**2+(n-i)**2),u=(o-s)/l,f=(n-i)/l;t.beginPath(),t.moveTo(s+(h+d/2)*u,i+(h+d/2)*f),t.lineTo(o-(h+d/2)*u,n-(h+d/2)*f),t.lineWidth=E,t.strokeStyle=b,t.stroke(),t.beginPath(),t.moveTo(s+h*u,i+h*f),t.lineTo(s+(h+d)*u-m/2*f,i+(h+d)*f+m/2*u),t.lineTo(s+(h+d)*u+m/2*f,i+(h+d)*f-m/2*u),t.fillStyle=b,t.fill(),t.beginPath(),t.moveTo(o-h*u,n-h*f),t.lineTo(o-(h+d)*u-m/2*f,n-(h+d)*f+m/2*u),t.lineTo(o-(h+d)*u+m/2*f,n-(h+d)*f-m/2*u),t.fillStyle=b,t.fill();break}case _.TARGET:{const l=Math.sqrt((o-s)**2+(n-i)**2),u=(o-s)/l,f=(n-i)/l;t.beginPath(),t.moveTo(s,i),t.lineTo(o-(h+d/2)*u,n-(h+d/2)*f),t.lineWidth=E,t.strokeStyle=b,t.stroke(),t.beginPath(),t.moveTo(o-h*u,n-h*f),t.lineTo(o-(h+d)*u-m/2*f,n-(h+d)*f+m/2*u),t.lineTo(o-(h+d)*u+m/2*f,n-(h+d)*f-m/2*u),t.fillStyle=b,t.fill();break}case _.SOURCE:{const l=Math.sqrt((o-s)**2+(n-i)**2),u=(o-s)/l,f=(n-i)/l;t.beginPath(),t.moveTo(s+(h+d/2)*u,i+(h+d/2)*f),t.lineTo(o,n),t.lineWidth=E,t.strokeStyle=b,t.stroke(),t.beginPath(),t.moveTo(s+h*u,i+h*f),t.lineTo(s+(h+d)*u-m/2*f,i+(h+d)*f+m/2*u),t.lineTo(s+(h+d)*u+m/2*f,i+(h+d)*f-m/2*u),t.fillStyle=b,t.fill();break}}}function ne(t,e){var o,n,l,u,f,r;const s=e.x,i=e.y;if(!(!s||!i))switch(e.shape){case"square":{const a=h;if(e.outlineWidth&&e.outlineColor&&I(t,s,i,a+e.outlineWidth,e.outlineColor),t.save(),t.beginPath(),t.rect(s-a,i-a,a*2,a*2),e.image)if(((o=e.$image)==null?void 0:o.width)&&e.$image.height){const c=Math.min(e.$image.width,e.$image.height);t.clip(),t.drawImage(e.$image,(e.$image.width-c)/2,(e.$image.height-c)/2,c,c,s-h,i-h,h*2,h*2)}else e.$image=Object.assign(new Image,{src:e.image}),t.fillStyle=(n=e.bgColor)!=null?n:y,t.fill();else t.fillStyle=(l=e.bgColor)!=null?l:y,t.fill();t.restore();break}case"circle":{const a=h;if(e.outlineWidth&&e.outlineColor&&C(t,s,i,a+e.outlineWidth,e.outlineColor),e.image?((u=e.$image)==null?void 0:u.width)&&e.$image.height?ie(t,s,i,a,e.$image):(e.$image=Object.assign(new Image,{src:e.image}),C(t,s,i,a,(f=e.bgColor)!=null?f:y)):C(t,s,i,a,(r=e.bgColor)!=null?r:y),e.badgeColor){const c=s+a*.7071,v=i-a*.7071;C(t,c,v,1.125,"#FFFFFF"),C(t,c,v,.875,e.badgeColor)}break}case"text":{if(e.label){t.save(),t.font="1.75px sans-serif",t.textAlign="center",t.textBaseline="middle";const{width:a}=t.measureText(e.label);t.beginPath(),t.moveTo(s-a/2,i-1.5),t.lineTo(s+a/2,i-1.5),t.arc(s+a/2,i,1.5,Math.PI/-2,Math.PI/2),t.lineTo(s+a/2,i+1.5),t.lineTo(s-a/2,i+1.5),t.arc(s-a/2,i,1.5,Math.PI/2,Math.PI/-2),t.fillStyle="#333333",t.fill(),t.fillStyle="#FFFFFF",t.fillText(e.label,s,i),t.restore()}break}}}function re(t,e){var o,n;const s=e.x,i=e.y;if(!(!s||!i))switch(e.shape){case"square":{const l=h;e.outlineWidth&&e.outlineColor&&I(t,s,i,l+e.outlineWidth,e.outlineColor),I(t,s,i,l,(o=e.bgColor)!=null?o:y);break}case"circle":case"text":{const l=h;if(e.outlineWidth&&e.outlineColor&&C(t,s,i,l+e.outlineWidth,e.outlineColor),C(t,s,i,l,(n=e.bgColor)!=null?n:y),e.badgeColor){const u=s+l*.7071,f=i-l*.7071;C(t,u,f,1.125,"#FFFFFF"),C(t,u,f,.875,e.badgeColor)}break}}}function L(t,e){var o,n;if(!e.label)return;const s=e.x,i=e.y;if(!(!s||!i)){if(e.emphasize){t.fillStyle=(o=e.fontColor)!=null?o:ee,t.font="5.75px sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText(e.label,s,i);return}if(e.shape!=="text"){t.save(),t.font="1.75px sans-serif",t.textAlign="center",t.textBaseline="middle";const{width:l}=t.measureText(e.label);t.beginPath(),t.moveTo(s-l/2,i+h+2-1.5),t.lineTo(s+l/2,i+h+2-1.5),t.arc(s+l/2,i+h+2,1.5,Math.PI/-2,Math.PI/2),t.lineTo(s+l/2,i+h+2+1.5),t.lineTo(s-l/2,i+h+2+1.5),t.arc(s-l/2,i+h+2,1.5,Math.PI/2,Math.PI/-2),t.fillStyle=(n=e.labelColor)!=null?n:te,t.fill(),t.fillStyle="#FFFFFF",t.fillText(e.label,s,i+h+2),t.restore()}}}var _;(function(t){t[t.NONE=0]="NONE",t[t.SOURCE=1]="SOURCE",t[t.TARGET=2]="TARGET",t[t.DUPLEX=3]="DUPLEX"})(_||(_={}));class le extends z{constructor(e,s){super();g(this,"nodes");g(this,"nodeIndexes");g(this,"edges");g(this,"edgeIndexes");g(this,"width");g(this,"height");g(this,"$forceCenter");g(this,"$forceLink");g(this,"$simulator");g(this,"$transform");g(this,"renderTick",null);g(this,"latestMovedNode",null);g(this,"timeoutMousemoveOnZoom",null);var l,u,f;this.$canvas=e,this.initDatas=s,s=s!=null?s:{};const{width:i,height:o}=e.getBoundingClientRect();this.width=e.width=i,this.height=e.height=o,this.$forceCenter=X(i/2,o/2),this.$forceLink=W().id(r=>r.id).distance(({distance:r})=>r!=null?r:40),this.$simulator=U().force("charge",j()).force("center",this.$forceCenter).force("link",this.$forceLink),((l=s.$simulator)==null?void 0:l.alpha)&&this.$simulator.alpha(s.$simulator.alpha),this.nodes=(u=s.nodes)!=null?u:[],this.nodeIndexes=new Map(this.nodes.map(r=>[r.id,r])),this.edges=(f=s.edges)!=null?f:[],this.edgeIndexes=new Map(this.edges.map(r=>{const a=typeof r.source=="object"?r.source.id:r.source,c=typeof r.target=="object"?r.target.id:r.target;let v=`${a}|${c}`;return a>c&&(v=`${c}|${a}`,[r.source,r.target]=[r.target,r.source],r.direction===2?r.direction=1:r.direction===1&&(r.direction=2)),[v,r]})),this.$simulator.nodes(this.nodes),this.$forceLink.links(this.edges),this.onTick=this.onTick.bind(this),this.onClick=this.onClick.bind(this),this.onMove=this.onMove.bind(this),this.$simulator.on("tick",this.onTick),e.addEventListener("click",this.onClick),e.addEventListener("mousemove",this.onMove);const n=G(e).call(Y().scaleExtent([1/10,8]).on("zoom",this.onZoom.bind(this)));this.$transform=S,s.$transform&&(this.$transform=S.translate(s.$transform.x,s.$transform.y).scale(s.$transform.k)),n.property("__zoom",()=>this.$transform)}dump(){return{nodes:this.nodes.slice(),edges:this.edges.map(({source:e,target:s,distance:i,direction:o})=>({source:typeof e=="object"?e.id:e,target:typeof s=="object"?s.id:s,distance:i,direction:o})),$transform:this.$transform,$simulator:{alpha:this.$simulator.alpha()}}}clear(){this.nodes=[],this.nodeIndexes.clear(),this.edges=[],this.edgeIndexes.clear(),this.render()}destroy(){this.$simulator.stop(),this.$canvas.removeEventListener("click",this.onClick),this.$canvas.removeEventListener("mousemove",this.onMove)}resize(){const{width:e,height:s}=this.$canvas.getBoundingClientRect();this.width=this.$canvas.width=e,this.height=this.$canvas.height=s,this.$forceCenter.x(e/2).y(s/2),this.onTick()}focusNode(e){const s=this.$simulator.nodes().find(i=>i.id===e);if((s==null?void 0:s.x)&&s.y){const i=s.x,o=s.y;this.$transform.applyX(i-this.width/2),this.$transform.applyY(o-this.height/2)}}pushOrMergeNode(e,s){const i=this.nodeIndexes.get(e.id);i?(Object.assign(i,s(i)),this.onTick()):(this.nodes.push(e),this.nodeIndexes.set(e.id,e),this.render())}getGraphPositionAndSize(){const e=r=>r,[s,i,o,n]=[F(this.nodes.map(r=>{var a;return(a=r.x)!=null?a:0}).filter(e)),B(this.nodes.map(r=>{var a;return(a=r.x)!=null?a:0}).filter(e)),F(this.nodes.map(r=>{var a;return(a=r.y)!=null?a:0}).filter(e)),B(this.nodes.map(r=>{var a;return(a=r.y)!=null?a:0}).filter(e))],l=i-s,u=n-o,f={x:l/2+s,y:u/2+o};return{width:l,height:u,center:f}}addNodeOrMerge(e,s){const i=this.nodeIndexes.get(e.id);if(i)Object.assign(i,s(e,i)),this.onTick();else{const{width:o,height:n,center:l}=this.getGraphPositionAndSize(),u=Math.max(o,n)/2,f=Math.random()*360,r=u*Math.cos(f*(Math.PI/180))+l.x,a=u*Math.sin(f*(Math.PI/180))+l.y;Object.assign(e,{x:r,y:a}),this.nodes.push(e),this.nodeIndexes.set(e.id,e),this.render()}}addNode(e){this.addNodeOrMerge(e,se)}addEdge({source:e,target:s,direction:i,distance:o}){let n=`${e}|${s}`;e>s&&(n=`${s}|${e}`,[e,s]=[s,e],i===2?i=1:i===1&&(i=2));const l=this.edgeIndexes.get(n);if(l)(i===3||l.direction===1&&i===2||l.direction===2&&i===1)&&Object.assign(l,{direction:3}),this.onTick();else{const u={source:e,target:s,distance:o,direction:i!=null?i:0};this.edges.push(u),this.edgeIndexes.set(n,u),this.render()}}findNodeByPosition(e,s){for(const i of this.$simulator.nodes()){const o=e-i.x,n=s-i.y;if(o**2+n**2<$)return i}return null}onClick(e){const{left:s,top:i}=e.target.getBoundingClientRect(),o=this.findNodeByPosition(this.$transform.invertX(e.x-s),this.$transform.invertY(e.y-i));!o||o.hidden||this.emit("click_node",o)}onMove(e){const{left:s,top:i}=e.target.getBoundingClientRect(),o=this.findNodeByPosition(this.$transform.invertX(e.x-s),this.$transform.invertY(e.y-i));this.latestMovedNode===o?this.emit("move_node",o):!this.latestMovedNode&&o?this.emit("enter_node",o):this.emit("leave_node",this.latestMovedNode),this.latestMovedNode=o}onZoom(e){this.$transform=e.transform,this.onTick(),this.emit("zoom")}onTick(){const e=this.$canvas.getContext("2d");e&&this.onDrawGraph(e)}onDrawGraph(e){e.save(),e.clearRect(0,0,this.width,this.height),e.translate(this.$transform.x,this.$transform.y),e.scale(this.$transform.k,this.$transform.k);for(const s of this.$forceLink.links())s.source.hidden||s.target.hidden||oe(e,s);if(this.$transform.k>3){for(const s of this.$simulator.nodes())s.hidden||ne(e,s);for(const s of this.$simulator.nodes())s.hidden||L(e,s)}else{for(const s of this.$simulator.nodes())s.hidden||re(e,s);for(const s of this.$simulator.nodes())s.hidden||s.emphasize&&L(e,s)}e.restore()}render(){this.renderTick||(this.renderTick=setTimeout(()=>{this.renderTick=null,this.$simulator.nodes(this.nodes),this.$forceLink.links(this.edges),this.$simulator.alpha(.1).restart()},0))}}const ae={class:"relative w-full h-full"},he={class:"absolute px-6 pt-2 pb-4 space-y-4 bg-white rounded-lg shadow-lg top-8 left-10"},ue={class:"flex items-center space-x-2"},fe=["onSubmit"],de=p("div",{class:"text-gray-500"},"\u23CE",-1),ce={key:0,class:"flex items-center space-x-4"},me=["src"],ge={class:"text-sm text-gray-600"},pe={class:"space-x-1"},ve=["href"],Ce={class:"text-ellipsis"},be={class:""},ye={key:1,class:"pt-4 text-sm text-gray-400"},_e=N({setup(t){const e=w(null),s=w(null),i=w(null),o=w(new Map);let n;q(()=>{for(const[r,a]of o.value){n.addNode({id:r.id,label:r.login,shape:"circle",image:r.avatar_url,extra:null});for(const c of a)n.addNode({id:c.id,label:c.name,shape:"text",extra:c}),n.addEdge({source:r.id,target:c.id})}}),H(()=>{!e.value||(n=new le(e.value),n.on("click_node",r=>{r.extra&&(s.value=null,f(r.extra.owner.login))}),window.addEventListener("resize",l))}),V(()=>{n.destroy(),window.removeEventListener("resize",l)});function l(){n.resize()}function u(){s.value?f(s.value):i.value=null}async function f(r){if(r=r.trim(),!r)return;const a=await fetch(`https://api.github.com/users/${r}`).then(v=>v.status===200?v.json():Promise.resolve(null));if(!a){alert("\uC0AC\uC6A9\uC790\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),s.value=null;return}const c=a.type==="User"?await fetch(`https://api.github.com/users/${r}/starred?per_page=100`).then(v=>v.status===200?v.json():Promise.resolve(null)):null;i.value=a,o.value.set(a,c!=null?c:[])}return(r,a)=>(k(),T("div",ae,[p("div",he,[p("div",ue,[p("form",{onSubmit:D(u,["prevent"])},[Z(p("input",{class:"px-1 py-2 placeholder-gray-400 border-b border-gray-200 focus:outline-none focus:ring-0",placeholder:"Github \uC544\uC774\uB514 \uAC80\uC0C9","onUpdate:modelValue":a[0]||(a[0]=c=>s.value=c)},null,512),[[K,s.value]])],40,fe),de]),i.value?(k(),T("div",ce,[i.value.avatar_url?(k(),T("img",{key:0,class:"w-12 h-12 rounded-2xl",src:i.value.avatar_url},null,8,me)):P("",!0),p("div",ge,[p("div",pe,[p("a",{class:"font-semibold hover:text-black",target:"_blank",href:`https://github.com/${i.value.login}`},M(i.value.login),9,ve),p("span",null,"("+M(i.value.name)+")",1)]),p("div",Ce,M(i.value.bio),1),p("div",be,M(i.value.email),1)])])):P("",!0),i.value?(k(),T("div",ye," * \uC720\uC800\uB4E4 \uAC04\uC758 \uC2A4\uD0C0\uB97C \uB204\uB978 \uB9AC\uD3EC\uC9C0\uD1A0\uB9AC \uAD00\uACC4\uB97C \uBCF4\uC5EC\uC90D\uB2C8\uB2E4. ")):P("",!0)]),p("canvas",{class:"w-full h-full",ref_key:"canvas",ref:e},null,512)]))}}),ke={class:"w-full h-full"},Te=N({setup(t){return(e,s)=>(k(),T("div",ke,[J(_e)]))}});Q(Te).mount("#app");
